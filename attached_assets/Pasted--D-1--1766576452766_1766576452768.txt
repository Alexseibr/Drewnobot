========================================
D.1) АУДИТ ТЕКСТИЛЯ (ИНВЕНТАРИЗАЦИЯ) — ДОБАВИТЬ В МОДУЛЬ "ПРАЧЕЧНАЯ"
========================================
Цель: администратор проводит полный аудит всего текстиля:
- сколько на складе
- сколько застелено в домиках/номерах
- сколько в прачечной
+ разрез по цветам: белый / светло-серый / темно-серый (графит)

Требования:
1) Добавить сущности для инвентаря текстиля и аудитов.
2) Добавить экран/пульт "Аудит текстиля" в модуль прачечной.
3) Все результаты должны записываться в БД + в таблицу (Google Sheets) для аналитики.
4) Аудит должен быть удобным: быстрый ввод, сохранение черновика, итоговая отправка.
5) Партии прачечной должны уметь ссылаться на аудит/инвентарь по цветам (сколько белого/сколько серого отправили).

------------------------------------------------
D.1.1) Справочники
------------------------------------------------
Color enum:
- WHITE ("белый")
- LIGHT_GRAY ("светло-серый")
- DARK_GRAY ("темно-серый/графит")

TextileItemType enum (минимальный список):
- PILLOWCASE (наволочка)
- TOWEL_LARGE (полотенце большое)
- TOWEL_MEDIUM (полотенце среднее)
- TOWEL_SMALL (полотенце маленькое)
- DUVET_COVER (пододеяльник)
- BED_SHEET (простынь)
- BATHROBE (халат)
- SAUNA_TOWEL (полотенце для бани / спец)

Location enum:
- WAREHOUSE (склад)
- ROOMS (застелено в домиках/номерах)
- LAUNDRY (в прачечной)

------------------------------------------------
D.1.2) Модели (БД)
------------------------------------------------
TextileInventorySnapshot (снимок инвентаря):
- id
- created_at
- created_by (admin_id)
- status: DRAFT | SUBMITTED
- notes (optional)
- period_tag (optional, например "audit_2025_01" или дата)

TextileInventoryLine:
- id
- snapshot_id
- item_type (enum)
- color (enum)
- qty_warehouse (int >=0)
- qty_rooms (int >=0)
- qty_laundry (int >=0)
- total_qty (виртуально/или сохранять: warehouse+rooms+laundry)
- optional_fields:
  * kg_laundry (если нужно для контроля по весу, иначе не обязательно)

Правило целостности:
- уникальность строк внутри snapshot: (item_type + color) должны быть уникальны.
- totals должны считаться автоматически на backend.

------------------------------------------------
D.1.3) UX в приложении (и админке)
------------------------------------------------
Раздел "Прачечная" -> вкладка "Аудит текстиля"

Экран:
A) Заголовок: "Аудит текстиля"
B) Кнопки:
- "Начать новый аудит"
- "Продолжить черновик" (если есть DRAFT)
- "История аудитов"

C) Форма аудита (таблица):
Строки: item_type
Колонки: по цветам (WHITE / LIGHT_GRAY / DARK_GRAY)
В каждой ячейке три поля:
- Склад (шт)
- В номерах (шт)
- В прачечной (шт)

D) UX-ускорители:
- быстрые +/- кнопки возле чисел
- автосохранение (каждые N секунд) или "Сохранить черновик"
- кнопка "Отправить аудит" -> SUBMITTED, дальше правка только через новый аудит/корректировку

E) После SUBMITTED:
- администратор видит "Аудит отправлен" + итоговые суммы
- owner получает уведомление: "Аудит текстиля: всего ХХХ позиций. Белый: X, светло-серый: Y, темно-серый: Z. Открыть отчёт."

------------------------------------------------
D.1.4) Запись в таблицу (Google Sheets)
------------------------------------------------
Лист "TextileAudit"
Каждая строка = одна комбинация (snapshot_id + item_type + color):
- date_time
- snapshot_id
- admin_name
- item_type
- color
- qty_warehouse
- qty_rooms
- qty_laundry
- total_qty
- notes

Дополнительно лист "TextileAuditSummary" (опционально):
- snapshot_id
- total_white
- total_light_gray
- total_dark_gray
- total_all

------------------------------------------------
D.1.5) Связь с партиями прачечной (обязательно)
------------------------------------------------
Расширить LaundryLineItem:
- добавить поля color (enum) и item_type (enum) (если ранее было просто "тип строкой" — мигрировать на enum + allow "OTHER")
- для каждой партии админ указывает не просто количество, а количество в разрезе цвета:
  Пример: "Пододеяльник" -> WHITE qty=10, DARK_GRAY qty=6

Валидации (мягкие, без блокировки):
- при "Отправить в прачечную" показывать подсказку:
  "По последнему аудиту на складе доступно: ..."
  если превышает — предупреждение, но дать отправить (иногда аудит не актуален).

------------------------------------------------
D.1.6) API / Telegram (минимально)
------------------------------------------------
API:
- POST /api/laundry/textile-audit/start (создать DRAFT)
- PUT /api/laundry/textile-audit/:id/line (обновить строку)
- POST /api/laundry/textile-audit/:id/submit
- GET /api/laundry/textile-audit/latest
- GET /api/laundry/textile-audit/history

Telegram (опционально, если нужно):
- кнопка "Аудит текстиля" -> открыть webapp экран
или
- короткий сценарий "ввести аудит" в боте (лучше через webapp из-за объёма таблицы)

------------------------------------------------
D.1.7) Аналитика для Owner
------------------------------------------------
Owner-дашборд:
- "Сводка по текстилю (по последнему аудиту)"
  * всего по типам
  * всего по цветам
  * распределение: склад/номера/прачечная
- "Дельта к прошлому аудиту" (опционально)
